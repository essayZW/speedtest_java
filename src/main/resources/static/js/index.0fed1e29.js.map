{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/pages/index/App.vue?aa3c","webpack:///./src/pages/index/components/Speedtest/Speedtest.vue?0df6","webpack:///./src/pages/index/components/Speedtest/speedtest.worker.js","webpack:///./src/pages/index/components/Speedtest/speedtest.js","webpack:///./src/utils/api.js","webpack:///src/pages/index/components/Speedtest/Speedtest.vue","webpack:///./src/pages/index/components/Speedtest/Speedtest.vue?5ce2","webpack:///./src/pages/index/components/Speedtest/Speedtest.vue","webpack:///src/pages/index/App.vue","webpack:///./src/pages/index/App.vue?a352","webpack:///./src/pages/index/App.vue","webpack:///./src/pages/index/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","_v","staticRenderFns","startButtonType","startButtonForbidden","on","startStop","_s","startButtonStart","model","callback","$$v","changeServerId","expression","_l","item","id","changeServer","staticClass","staticStyle","pingText","jitterText","dlText","ulText","ipAndIspContent","ipPositionAndAccessMethodContent","Worker_fn","undefined","Speedtest","_serverList","_selectedServer","_settings","_state","console","log","constructor","getState","setParameter","parameter","_originalExtra","telemetry_extra","_checkServerDefinition","server","charAt","substr","test","dlURL","ulURL","pingURL","getIpURL","e","error","addTestPoint","mpot","addTestPoints","list","loadServerList","url","xhr","XMLHttpRequest","onload","servers","JSON","parse","responseText","status","onerror","open","send","getSelectedServer","setSelectedServer","selectServer","_selectServerCalled","select","serverList","PING_TIMEOUT","USE_PING_TIMEOUT","navigator","userAgent","ping","match","Date","getTime","instspd","performance","getEntriesByName","responseStart","requestStart","duration","timeout","ontimeout","PINGS","SLOW_THRESHOLD","checkServer","done","pingT","indexOf","location","protocol","nextPing","bestServer","nextServer","CONCURRENCY","serverLists","completed","start","worker","SpeedtestWorker","onmessage","_prevData","onupdate","testState","onend","clearInterval","updater","setInterval","postMessage","url_dl","port","url_ul","url_ping","url_getIp","server_id","stringify","extra","abort","ApiHost","pointReady","uiData","methods","initUI","meterBk","dlColor","drawMeter","I","ulColor","updateUI","progColor","forced","clientIp","isp","linkChar","ipPosition","ipAccessMethod","format","pingStatus","jitterStatus","document","getElementById","mbpsToAmount","Math","pow","sqrt","Number","toFixed","oscillate","sin","now","ctx","getContext","dp","devicePixelRatio","cw","clientWidth","sizScale","ch","width","height","clearRect","beginPath","strokeStyle","bk","lineWidth","arc","stroke","fg","progress","fillStyle","prog","fillRect","frame","requestAnimationFrame","mounted","alert","component","components","Vue","config","productionTip","use","ElementUI","render","h","App","$mount"],"mappings":"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","file":"static/js/index.0fed1e29.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"index\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('el-container',[_c('el-header',[_vm._v(\"Header\")]),_c('el-main',[_c('Speedtest')],1),_c('el-footer',[_vm._v(\"Footer\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"testWrapper\"}},[_c('el-button',{attrs:{\"type\":_vm.startButtonType,\"disabled\":_vm.startButtonForbidden},on:{\"click\":_vm.startStop}},[_vm._v(_vm._s(!_vm.startButtonStart ? '开始' : '结束'))]),_c('br'),_c('div',{attrs:{\"id\":\"serverSelectArea\"}},[_c('div',[_c('label',{attrs:{\"for\":\"serverList\"}},[_vm._v(\"Server:\")]),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.changeServerId),callback:function ($$v) {_vm.changeServerId=$$v},expression:\"changeServerId\"}},_vm._l((_vm.serverLists),function(item){return _c('el-option',{key:item.id,attrs:{\"value\":item.id,\"label\":item.name},on:{\"change\":_vm.changeServer}})}),1)],1)]),_c('div',{attrs:{\"id\":\"test\"}},[_c('div',{staticClass:\"testGroup\"},[_c('div',{staticClass:\"testArea2\"},[_c('div',{staticClass:\"testName\"},[_vm._v(\"Ping\")]),_c('div',{staticClass:\"meterText\",staticStyle:{\"color\":\"#aa6060\"},attrs:{\"id\":\"pingText\"}},[_vm._v(\" \"+_vm._s(_vm.pingText)+\" \")]),_c('div',{staticClass:\"unit\"},[_vm._v(\"ms\")])]),_c('div',{staticClass:\"testArea2\"},[_c('div',{staticClass:\"testName\"},[_vm._v(\"Jitter\")]),_c('div',{staticClass:\"meterText\",staticStyle:{\"color\":\"#aa6060\"},attrs:{\"id\":\"jitText\"}},[_vm._v(\" \"+_vm._s(_vm.jitterText)+\" \")]),_c('div',{staticClass:\"unit\"},[_vm._v(\"ms\")])])]),_c('div',{staticClass:\"testGroup\"},[_c('div',{staticClass:\"testArea\"},[_c('div',{staticClass:\"testName\"},[_vm._v(\"Download\")]),_c('canvas',{staticClass:\"meter\",attrs:{\"id\":\"dlMeter\"}}),_c('div',{staticClass:\"meterText\",attrs:{\"id\":\"dlText\"}},[_vm._v(_vm._s(_vm.dlText))]),_c('div',{staticClass:\"unit\"},[_vm._v(\"Mbps\")])]),_c('div',{staticClass:\"testArea\"},[_c('div',{staticClass:\"testName\"},[_vm._v(\"Upload\")]),_c('canvas',{staticClass:\"meter\",attrs:{\"id\":\"ulMeter\"}}),_c('div',{staticClass:\"meterText\",attrs:{\"id\":\"ulText\"}},[_vm._v(_vm._s(_vm.ulText))]),_c('div',{staticClass:\"unit\"},[_vm._v(\"Mbps\")])])]),_c('div',{attrs:{\"id\":\"ipArea\"}},[_c('div',{attrs:{\"id\":\"ipAndIsp\"}},[_vm._v(_vm._s(_vm.ipAndIspContent))]),_c('div',{attrs:{\"id\":\"ipPositionAndAccessMethod\"}},[_vm._v(\" \"+_vm._s(_vm.ipPositionAndAccessMethodContent)+\" \")])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport worker from \"!!../../../../../node_modules/worker-loader/dist/runtime/inline.js\";\n\nexport default function Worker_fn() {\n  return worker(\"(function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\\\"undefined\\\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\\\"Module\\\"}),Object.defineProperty(e,\\\"__esModule\\\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\\\"object\\\"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\\\"default\\\",{enumerable:!0,value:e}),2&t&&\\\"string\\\"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e[\\\"default\\\"]}:function(){return e};return r.d(t,\\\"a\\\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\\\"/\\\",r(r.s=\\\"87fd\\\")})({\\\"87fd\\\":function(e,t){var r=-1,n=\\\"\\\",o=\\\"\\\",i=\\\"\\\",a=\\\"\\\",l=\\\"\\\",s=0,u=0,d=0,c=null,p=\\\"\\\",f=\\\"\\\",m=\\\"\\\",g=\\\"\\\";function _(e){y.telemetry_level>=2&&(g+=Date.now()+\\\": \\\"+e+\\\"\\\\n\\\")}function h(e){y.telemetry_level>=3&&(g+=Date.now()+\\\": \\\"+e+\\\"\\\\n\\\")}function v(e){y.telemetry_level>=2&&(g+=Date.now()+\\\" WARN: \\\"+e+\\\"\\\\n\\\"),console.warn(e)}var y={mpot:!1,test_order:\\\"IP_D_U\\\",time_ul_max:15,time_dl_max:15,time_auto:!0,time_ulGraceTime:3,time_dlGraceTime:1.5,count_ping:10,url_dl:\\\"/speed/api/download\\\",url_ul:\\\"/speed/api/empty\\\",url_ping:\\\"/speed/api/empty\\\",url_getIp:\\\"/speed/api/ip\\\",getIp_ispInfo:!0,getIp_ispInfo_distance:\\\"km\\\",xhr_dlMultistream:6,xhr_ulMultistream:3,xhr_multistreamDelay:300,xhr_ignoreErrors:1,xhr_dlUseBlob:!1,xhr_ul_blob_megabytes:20,garbagePhp_chunkSize:100,enable_quirks:!0,ping_allowPerformanceApi:!0,overheadCompensationFactor:1.06,useMebibits:!1,telemetry_level:0,url_telemetry:\\\"/api/history\\\",telemetry_extra:\\\"\\\",server_id:null},b=null,w=null,x=0;function T(e){return e.match(/\\\\?/)?\\\"&\\\":\\\"?\\\"}function M(){if(h(\\\"stopping pending XHRs\\\"),b){for(var e=0;e<b.length;e++){try{b[e].onprogress=null,b[e].onload=null,b[e].onerror=null}catch(t){console.error(t)}try{b[e].upload.onprogress=null,b[e].upload.onload=null,b[e].upload.onerror=null}catch(t){console.error(t)}try{b[e].abort()}catch(t){console.error(t)}try{delete b[e]}catch(t){console.error(t)}}b=null}}self.addEventListener(\\\"message\\\",(function(e){var t=e.data.split(\\\" \\\");if(\\\"status\\\"===t[0]&&postMessage(JSON.stringify({testState:r,dlStatus:n,ulStatus:o,pingStatus:i,clientIp:l,isp:m,ipPosition:p,ipAccessMethod:f,jitterStatus:a,dlProgress:s,ulProgress:u,pingProgress:d,testId:c})),\\\"start\\\"===t[0]&&-1===r){r=0;try{var g={};try{var b=e.data.substring(5);b&&(g=JSON.parse(b))}catch(e){v(\\\"Error parsing custom settings JSON. Please check your syntax\\\")}for(var T in g)\\\"undefined\\\"!==typeof y[T]?y[T]=g[T]:v(\\\"Unknown setting ignored: \\\"+T);var P=navigator.userAgent;(y.enable_quirks||\\\"undefined\\\"!==typeof g.enable_quirks&&g.enable_quirks)&&(/Firefox.(\\\\d+\\\\.\\\\d+)/i.test(P)&&\\\"undefined\\\"===typeof g.ping_allowPerformanceApi&&(y.ping_allowPerformanceApi=!1),/Edge.(\\\\d+\\\\.\\\\d+)/i.test(P)&&\\\"undefined\\\"===typeof g.xhr_dlMultistream&&(y.xhr_dlMultistream=3),/Chrome.(\\\\d+)/i.test(P)&&self.fetch&&\\\"undefined\\\"===typeof g.xhr_dlMultistream&&(y.xhr_dlMultistream=5)),/Edge.(\\\\d+\\\\.\\\\d+)/i.test(P)&&(y.forceIE11Workaround=!0),/PlayStation 4.(\\\\d+\\\\.\\\\d+)/i.test(P)&&(y.forceIE11Workaround=!0),/Chrome.(\\\\d+)/i.test(P)&&/Android|iPhone|iPad|iPod|Windows Phone/i.test(P)&&(y.xhr_ul_blob_megabytes=4),/^((?!chrome|android|crios|fxios).)*safari/i.test(P)&&(y.forceIE11Workaround=!0),\\\"undefined\\\"!==typeof g.telemetry_level&&(y.telemetry_level=\\\"basic\\\"===g.telemetry_level?1:\\\"full\\\"===g.telemetry_level?2:\\\"debug\\\"===g.telemetry_level?3:0),y.test_order=y.test_order.toUpperCase()}catch(e){v(\\\"Possible error in custom test settings. Some settings might not have been applied. Exception: \\\"+e)}h(JSON.stringify(y)),x=0;var I=!1,S=!1,E=!1,A=!1,N=function(){if(5!=r)if(x>=y.test_order.length)y.telemetry_level>0?q((function(e){r=4,null!=e&&(c=e)})):r=4;else switch(y.test_order.charAt(x)){case\\\"I\\\":if(x++,I)return void N();I=!0,k(N);break;case\\\"D\\\":if(x++,S)return void N();S=!0,r=1,D(N);break;case\\\"U\\\":if(x++,E)return void N();E=!0,r=3,O(N);break;case\\\"P\\\":if(x++,A)return void N();A=!0,r=2,F(N);break;case\\\"_\\\":x++,setTimeout(N,1e3);break;default:x++}};N()}if(\\\"abort\\\"===t[0]){if(r>=4)return;_(\\\"manually aborted\\\"),M(),N=null,w&&clearInterval(w),y.telemetry_level>1&&q((function(){})),r=5,n=\\\"\\\",o=\\\"\\\",i=\\\"\\\",a=\\\"\\\",l=\\\"\\\",m=\\\"\\\",p=\\\"\\\",f=\\\"\\\",s=0,u=0,d=0}}));var P=!1,I=\\\"\\\";function k(e){if(h(\\\"getIp\\\"),!P){P=!0;var t=(new Date).getTime();b=new XMLHttpRequest,b.onload=function(){_(\\\"IP: \\\"+b.responseText+\\\", took \\\"+((new Date).getTime()-t)+\\\"ms\\\");try{var r=JSON.parse(b.responseText).data;l=r.ip,null!=l&&void 0!=l||(l=\\\"Unknown\\\"),m=r.isp,null!=m&&void 0!=m||(m=\\\"Unknown\\\"),p=r.position,null!=p&&void 0!=p||(p=\\\"Unknown\\\"),f=r.accessMethod,null!=f&&void 0!=p||(f=\\\"Unknown\\\")}catch(n){l=\\\"Failed to get IP\\\",I=\\\"\\\"}e()},b.onerror=function(){_(\\\"getIp failed, took \\\"+((new Date).getTime()-t)+\\\"ms\\\"),e()},b.open(\\\"GET\\\",y.url_getIp+T(y.url_getIp)+(y.mpot?\\\"cors=true&\\\":\\\"\\\")+(y.getIp_ispInfo?\\\"isp=true\\\"+(y.getIp_ispInfo_distance?\\\"&distance=\\\"+y.getIp_ispInfo_distance+\\\"&\\\":\\\"&\\\"):\\\"&\\\")+\\\"r=\\\"+Math.random(),!0),b.send()}}var S=!1;function D(e){if(h(\\\"dlTest\\\"),!S){S=!0;var t=0,o=(new Date).getTime(),i=0,a=!1,l=!1;b=[];for(var u=function(e,n){setTimeout(function(){if(1===r){h(\\\"dl test stream started \\\"+e+\\\" \\\"+n);var o=0,i=new XMLHttpRequest;b[e]=i,b[e].onprogress=function(n){if(h(\\\"dl stream progress event \\\"+e+\\\" \\\"+n.loaded),1!==r)try{i.abort()}catch(l){console.error(l)}var a=n.loaded<=0?0:n.loaded-o;isNaN(a)||!isFinite(a)||a<0||(t+=a,o=n.loaded)}.bind(this),b[e].onload=function(){h(\\\"dl stream finished \\\"+e);try{b[e].abort()}catch(t){console.error(t)}u(e,0)}.bind(this),b[e].onerror=function(){h(\\\"dl stream failed \\\"+e),0===y.xhr_ignoreErrors&&(l=!0);try{b[e].abort()}catch(t){console.error(t)}delete b[e],1===y.xhr_ignoreErrors&&u(e,0)}.bind(this);try{y.xhr_dlUseBlob?b[e].responseType=\\\"blob\\\":b[e].responseType=\\\"arraybuffer\\\"}catch(a){console.error(a)}b[e].open(\\\"GET\\\",y.url_dl+T(y.url_dl)+(y.mpot?\\\"cors=true&\\\":\\\"\\\")+\\\"r=\\\"+Math.random()+\\\"&ckSize=\\\"+y.garbagePhp_chunkSize,!0),b[e].send()}}.bind(this),1+n)}.bind(this),d=0;d<y.xhr_dlMultistream;d++)u(d,y.xhr_multistreamDelay*d);w=setInterval(function(){h(\\\"DL: \\\"+n+(a?\\\"\\\":\\\" (in grace time)\\\"));var r=(new Date).getTime()-o;if(a&&(s=(r+i)/(1e3*y.time_dl_max)),!(r<200))if(a){var u=t/(r/1e3);if(y.time_auto){var d=6.4*u/1e5;i+=d>800?800:d}n=(8*u*y.overheadCompensationFactor/(y.useMebibits?1048576:1e6)).toFixed(2),((r+i)/1e3>y.time_dl_max||l)&&((l||isNaN(n))&&(n=\\\"Fail\\\"),M(),clearInterval(w),s=1,_(\\\"dlTest: \\\"+n+\\\", took \\\"+((new Date).getTime()-o)+\\\"ms\\\"),e())}else r>1e3*y.time_dlGraceTime&&(t>0&&(o=(new Date).getTime(),i=0,t=0),a=!0)}.bind(this),200)}}var E=!1;function O(e){if(h(\\\"ulTest\\\"),!E){E=!0;var t=new ArrayBuffer(1048576),n=Math.pow(2,32)-1;try{t=new Uint32Array(t);for(var i=0;i<t.length;i++)t[i]=Math.random()*n}catch(d){console.error(d)}var a=[],l=[];for(let e=0;e<y.xhr_ul_blob_megabytes;e++)a.push(t);a=new Blob(a),t=new ArrayBuffer(262144);try{t=new Uint32Array(t);for(let e=0;e<t.length;e++)t[e]=Math.random()*n}catch(d){console.error(d)}l.push(t),l=new Blob(l);var s=function(){var t=0,n=(new Date).getTime(),i=0,s=!1,c=!1;b=[];for(var p=function(e,n){setTimeout(function(){if(3===r){h(\\\"ul test stream started \\\"+e+\\\" \\\"+n);var o,i=0,s=new XMLHttpRequest;if(b[e]=s,y.forceIE11Workaround)o=!0;else try{b[e].upload.onprogress,o=!1}catch(d){o=!0}if(o){b[e].onload=b[e].onerror=function(){h(\\\"ul stream progress event (ie11wa)\\\"),t+=l.size,p(e,0)},b[e].open(\\\"POST\\\",y.url_ul+T(y.url_ul)+(y.mpot?\\\"cors=true&\\\":\\\"\\\")+\\\"r=\\\"+Math.random(),!0);try{b[e].setRequestHeader(\\\"Content-Encoding\\\",\\\"identity\\\")}catch(d){console.error(d)}b[e].send(l)}else{b[e].upload.onprogress=function(n){if(h(\\\"ul stream progress event \\\"+e+\\\" \\\"+n.loaded),3!==r)try{s.abort()}catch(d){console.error(d)}var o=n.loaded<=0?0:n.loaded-i;isNaN(o)||!isFinite(o)||o<0||(t+=o,i=n.loaded)}.bind(this),b[e].upload.onload=function(){h(\\\"ul stream finished \\\"+e),p(e,0)}.bind(this),b[e].upload.onerror=function(){h(\\\"ul stream failed \\\"+e),0===y.xhr_ignoreErrors&&(c=!0);try{b[e].abort()}catch(d){console.error(d)}delete b[e],1===y.xhr_ignoreErrors&&p(e,0)}.bind(this),b[e].open(\\\"POST\\\",y.url_ul+T(y.url_ul)+(y.mpot?\\\"cors=true&\\\":\\\"\\\")+\\\"r=\\\"+Math.random(),!0);try{b[e].setRequestHeader(\\\"Content-Encoding\\\",\\\"identity\\\")}catch(d){console.error(d)}b[e].send(a)}}}.bind(this),n)}.bind(this),f=0;f<y.xhr_ulMultistream;f++)p(f,y.xhr_multistreamDelay*f);w=setInterval(function(){h(\\\"UL: \\\"+o+(s?\\\"\\\":\\\" (in grace time)\\\"));var r=(new Date).getTime()-n;if(s&&(u=(r+i)/(1e3*y.time_ul_max)),!(r<200))if(s){var a=t/(r/1e3);if(y.time_auto){var l=6.4*a/1e5;i+=l>800?800:l}o=(8*a*y.overheadCompensationFactor/(y.useMebibits?1048576:1e6)).toFixed(2),((r+i)/1e3>y.time_ul_max||c)&&((c||isNaN(o))&&(o=\\\"Fail\\\"),M(),clearInterval(w),u=1,_(\\\"ulTest: \\\"+o+\\\", took \\\"+((new Date).getTime()-n)+\\\"ms\\\"),e())}else r>1e3*y.time_ulGraceTime&&(t>0&&(n=(new Date).getTime(),i=0,t=0),s=!0)}.bind(this),200)}.bind(this);y.mpot?(h(\\\"Sending POST request before performing upload test\\\"),b=[],b[0]=new XMLHttpRequest,b[0].onload=b[0].onerror=function(){h(\\\"POST request sent, starting upload test\\\"),s()}.bind(this),b[0].open(\\\"POST\\\",y.url_ul+\\\"?cors=true\\\"),b[0].send()):s()}}var A=!1;function F(e){if(h(\\\"pingTest\\\"),!A){A=!0;var t=(new Date).getTime(),r=null,n=0,o=0,l=0,s=0;b=[];var u=function(){h(\\\"ping\\\"),d=l/y.count_ping,r=(new Date).getTime(),b[0]=new XMLHttpRequest,b[0].onload=function(){if(h(\\\"pong\\\"),0===l)r=(new Date).getTime();else{var c=(new Date).getTime()-r;if(y.ping_allowPerformanceApi)try{var p=performance.getEntries();p=p[p.length-1];var f=p.responseStart-p.requestStart;f<=0&&(f=p.duration),f>0&&f<c&&(c=f)}catch(g){h(\\\"Performance API not supported, using estimate\\\")}c<1&&(c=s),c<1&&(c=1);var m=Math.abs(c-s);1===l?n=c:(c<n&&(n=c),o=2===l?m:.9365*o+.0625*m),s=c}i=n.toFixed(2),a=o.toFixed(2),l++,h(\\\"ping: \\\"+i+\\\" jitter: \\\"+a),l<y.count_ping?u():(d=1,_(\\\"ping: \\\"+i+\\\" jitter: \\\"+a+\\\", took \\\"+((new Date).getTime()-t)+\\\"ms\\\"),e())}.bind(this),b[0].onerror=function(){h(\\\"ping failed\\\"),0===y.xhr_ignoreErrors&&(i=\\\"Fail\\\",a=\\\"Fail\\\",M(),_(\\\"ping test failed, took \\\"+((new Date).getTime()-t)+\\\"ms\\\"),d=1,e()),1===y.xhr_ignoreErrors&&u(),2===y.xhr_ignoreErrors&&(l++,l<y.count_ping?u():(d=1,_(\\\"ping: \\\"+i+\\\" jitter: \\\"+a+\\\", took \\\"+((new Date).getTime()-t)+\\\"ms\\\"),e()))}.bind(this),b[0].open(\\\"GET\\\",y.url_ping+T(y.url_ping)+(y.mpot?\\\"cors=true&\\\":\\\"\\\")+\\\"r=\\\"+Math.random(),!0),b[0].send()}.bind(this);u()}}function q(e){if(!(y.telemetry_level<1)){b=new XMLHttpRequest,b.onload=function(){try{var t=b.responseText.split(\\\" \\\");if(\\\"id\\\"==t[0])try{var r=t[1];e(r)}catch(n){e(null)}else e(null)}catch(n){e(null)}},b.onerror=function(){console.log(\\\"TELEMETRY ERROR \\\"+b.status),e(null)},b.open(\\\"POST\\\",y.url_telemetry+T(y.url_telemetry)+(y.mpot?\\\"cors=true&\\\":\\\"\\\")+\\\"r=\\\"+Math.random(),!0);try{var t=new FormData;t.append(\\\"ip\\\",l),t.append(\\\"dl\\\",n),t.append(\\\"ul\\\",o),t.append(\\\"ping\\\",i),t.append(\\\"jitter\\\",a),t.append(\\\"ua\\\",navigator.userAgent),t.append(\\\"testPointId\\\",y.server_id),t.append(\\\"extraAttribute\\\",JSON.stringify({isp:m,position:p,accessMethod:f})),b.send(t),console.log(g),console.log(I)}catch(r){console.error(r)}}}}});\\n//# sourceMappingURL=speedtest.worker.573ca6e5.worker.js.map\", \"Worker\", undefined, __webpack_public_path__ + \"static/js/speedtest.worker.573ca6e5.worker.js\");\n}\n","import SpeedtestWorker from './speedtest.worker.js'\r\n/*\r\n\tLibreSpeed - Main\r\n\tby Federico Dossena\r\n\thttps://github.com/librespeed/speedtest/\r\n\tGNU LGPLv3 License\r\n*/\r\n\r\n/*\r\n   This is the main interface between your webpage and the speedtest.\r\n   It hides the speedtest web worker to the page, and provides many convenient functions to control the test.\r\n\r\n   The best way to learn how to use this is to look at the basic example, but here's some documentation.\r\n\r\n   To initialize the test, create a new Speedtest object:\r\n    var s=new Speedtest();\r\n   Now you can think of this as a finite state machine. These are the states (use getState() to see them):\r\n   - 0: here you can change the speedtest settings (such as test duration) with the setParameter(\"parameter\",value) method. From here you can either start the test using start() (goes to state 3) or you can add multiple test points using addTestPoint(server) or addTestPoints(serverList) (goes to state 1). Additionally, this is the perfect moment to set up callbacks for the onupdate(data) and onend(aborted) events.\r\n   - 1: here you can add test points. You only need to do this if you want to use multiple test points.\r\n        A server is defined as an object like this:\r\n        {\r\n            name: \"User friendly name\",\r\n            server:\"http://yourBackend.com/\",     <---- URL to your server. You can specify http:// or https://. If your server supports both, just write // without the protocol\r\n            dlURL:\"garbage.php\"    <----- path to garbage.php or its replacement on the server\r\n            ulURL:\"empty.php\"    <----- path to empty.php or its replacement on the server\r\n            pingURL:\"empty.php\"    <----- path to empty.php or its replacement on the server. This is used to ping the server by this selector\r\n            getIpURL:\"getIP.php\"    <----- path to getIP.php or its replacement on the server\r\n        }\r\n        While in state 1, you can only add test points, you cannot change the test settings. When you're done, use selectServer(callback) to select the test point with the lowest ping. This is asynchronous, when it's done, it will call your callback function and move to state 2. Calling setSelectedServer(server) will manually select a server and move to state 2.\r\n    - 2: test point selected, ready to start the test. Use start() to begin, this will move to state 3\r\n    - 3: test running. Here, your onupdate event calback will be called periodically, with data coming from the worker about speed and progress. A data object will be passed to your onupdate function, with the following items:\r\n            - dlStatus: download speed in mbps\r\n            - ulStatus: upload speed in mbps\r\n            - pingStatus: ping in ms\r\n            - jitterStatus: jitter in ms\r\n            - dlProgress: progress of the download test as a float 0-1\r\n            - ulProgress: progress of the upload test as a float 0-1\r\n            - pingProgress: progress of the ping/jitter test as a float 0-1\r\n            - testState: state of the test (-1=not started, 0=starting, 1=download test, 2=ping+jitter test, 3=upload test, 4=finished, 5=aborted)\r\n            - clientIp: IP address of the client performing the test (and optionally ISP and distance)\r\n        At the end of the test, the onend function will be called, with a boolean specifying whether the test was aborted or if it ended normally.\r\n        The test can be aborted at any time with abort().\r\n        At the end of the test, it will move to state 4\r\n    - 4: test finished. You can run it again by calling start() if you want.\r\n */\r\n\r\nlet Speedtest = function() {\r\n  this._serverList = []; //when using multiple points of test, this is a list of test points\r\n  this._selectedServer = null; //when using multiple points of test, this is the selected server\r\n  this._settings = {}; //settings for the speedtest worker\r\n  this._state = 0; //0=adding settings, 1=adding servers, 2=server selection done, 3=test running, 4=done\r\n  console.log(\r\n    \"LibreSpeed by Federico Dossena v5.2 - https://github.com/librespeed/speedtest\"\r\n  );\r\n}\r\n\r\nSpeedtest.prototype = {\r\n  constructor: Speedtest,\r\n  /**\r\n   * Returns the state of the test: 0=adding settings, 1=adding servers, 2=server selection done, 3=test running, 4=done\r\n   */\r\n  getState: function() {\r\n    return this._state;\r\n  },\r\n  /**\r\n   * Change one of the test settings from their defaults.\r\n   * - parameter: string with the name of the parameter that you want to set\r\n   * - value: new value for the parameter\r\n   *\r\n   * Invalid values or nonexistant parameters will be ignored by the speedtest worker.\r\n   */\r\n  setParameter: function(parameter, value) {\r\n    if (this._state != 0)\r\n      throw \"You cannot change the test settings after adding server or starting the test\";\r\n    this._settings[parameter] = value;\r\n    if(parameter === \"temeletry_extra\"){\r\n        this._originalExtra=this._settings.telemetry_extra;\r\n    }\r\n  },\r\n  /**\r\n   * Used internally to check if a server object contains all the required elements.\r\n   * Also fixes the server URL if needed.\r\n   */\r\n  _checkServerDefinition: function(server) {\r\n    try {\r\n      if (typeof server.name !== \"string\")\r\n        throw \"Name string missing from server definition (name)\";\r\n      if (typeof server.server !== \"string\")\r\n        throw \"Server address string missing from server definition (server)\";\r\n      if (server.server.charAt(server.server.length - 1) == \"/\")\r\n        server.server = server.server.substr(0, server.server.length - 1);\r\n      if (! /^(http:\\/\\/|https:\\/\\/).+$/.test(server.server))\r\n        throw \"Server address string must start with http:// or https://\";\r\n      if (typeof server.dlURL !== \"string\")\r\n        throw \"Download URL string missing from server definition (dlURL)\";\r\n      if (server.dlURL.charAt(0) != '/')\r\n        server.dlURL = '/' + server.dlURL\r\n      if (typeof server.ulURL !== \"string\")\r\n        throw \"Upload URL string missing from server definition (ulURL)\";\r\n      if (server.ulURL.charAt(0) != '/')\r\n        server.ulURL = '/' + server.ulURL\r\n      if (typeof server.pingURL !== \"string\")\r\n        throw \"Ping URL string missing from server definition (pingURL)\";\r\n      if (server.pingURL.charAt(0) != '/')\r\n        server.pingURL = '/' + server.pingURL\r\n      if (typeof server.getIpURL !== \"string\")\r\n        throw \"GetIP URL string missing from server definition (getIpURL)\";\r\n      if (server.getIpURL.charAt(0) != '/')\r\n        server.getIpURL = '/' + server.getIpURL\r\n    } catch (e) {\r\n      console.error(e);\r\n      throw \"Invalid server definition\";\r\n    }\r\n  },\r\n  /**\r\n   * Add a test point (multiple points of test)\r\n   * server: the server to be added as an object. Must contain the following elements:\r\n   *  {\r\n   *       name: \"User friendly name\",\r\n   *       server:\"http://yourBackend.com/\",   URL to your server. You can specify http:// or https://. If your server supports both, just write // without the protocol\r\n   *       dlURL:\"garbage.php\"   path to garbage.php or its replacement on the server\r\n   *       ulURL:\"empty.php\"   path to empty.php or its replacement on the server\r\n   *       pingURL:\"empty.php\"   path to empty.php or its replacement on the server. This is used to ping the server by this selector\r\n   *       getIpURL:\"getIP.php\"   path to getIP.php or its replacement on the server\r\n   *   }\r\n   */\r\n  addTestPoint: function(server) {\r\n    this._checkServerDefinition(server);\r\n    if (this._state == 0) this._state = 1;\r\n    if (this._state != 1) throw \"You can't add a server after server selection\";\r\n    this._settings.mpot = true;\r\n    this._serverList.push(server);\r\n  },\r\n  /**\r\n   * Same as addTestPoint, but you can pass an array of servers\r\n   */\r\n  addTestPoints: function(list) {\r\n    for (var i = 0; i < list.length; i++) this.addTestPoint(list[i]);\r\n  },\r\n  /**\r\n   * Load a JSON server list from URL (multiple points of test)\r\n   * url: the url where the server list can be fetched. Must be an array with objects containing the following elements:\r\n   *  {\r\n   *       \"name\": \"User friendly name\",\r\n   *       \"server\":\"http://yourBackend.com/\",   URL to your server. You can specify http:// or https://. If your server supports both, just write // without the protocol\r\n   *       \"dlURL\":\"garbage.php\"   path to garbage.php or its replacement on the server\r\n   *       \"ulURL\":\"empty.php\"   path to empty.php or its replacement on the server\r\n   *       \"pingURL\":\"empty.php\"   path to empty.php or its replacement on the server. This is used to ping the server by this selector\r\n   *       \"getIpURL\":\"getIP.php\"   path to getIP.php or its replacement on the server\r\n   *   }\r\n   * result: callback to be called when the list is loaded correctly. An array with the loaded servers will be passed to this function, or null if it failed\r\n   */\r\n  loadServerList: function(url,result) {\r\n    if (this._state == 0) this._state = 1;\r\n    if (this._state != 1) throw \"You can't add a server after server selection\";\r\n    this._settings.mpot = true;\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.onload = function(){\r\n      try{\r\n        var servers=JSON.parse(xhr.responseText);\r\n        if (!servers.status) {\r\n          result(null);\r\n          return;\r\n        }\r\n        servers = servers.data;\r\n        for(var i=0;i<servers.length;i++){\r\n          servers[i].dlURL = '/speed/api/download';\r\n          servers[i].ulURL = '/speed/api/empty';\r\n          servers[i].pingURL = '/speed/api/empty';\r\n          servers[i].getIpURL = '/speed/api/ip';\r\n          this._checkServerDefinition(servers[i]);\r\n        }\r\n        this.addTestPoints(servers);\r\n        result(servers);\r\n      }catch(e){\r\n        console.error(e);\r\n        result(null);\r\n      }\r\n    }.bind(this);\r\n    xhr.onerror = function(){result(null);}\r\n    xhr.open(\"GET\",url);\r\n    xhr.send();\r\n  },\r\n  /**\r\n   * Returns the selected server (multiple points of test)\r\n   */\r\n  getSelectedServer: function() {\r\n    if (this._state < 2 || this._selectedServer == null)\r\n      throw \"No server is selected\";\r\n    return this._selectedServer;\r\n  },\r\n  /**\r\n   * Manually selects one of the test points (multiple points of test)\r\n   */\r\n  setSelectedServer: function(server) {\r\n    this._checkServerDefinition(server);\r\n    if (this._state == 3)\r\n      throw \"You can't select a server while the test is running\";\r\n    this._selectedServer = server;\r\n    this._state = 2;\r\n  },\r\n  /**\r\n   * Automatically selects a server from the list of added test points. The server with the lowest ping will be chosen. (multiple points of test)\r\n   * The process is asynchronous and the passed result callback function will be called when it's done, then the test can be started.\r\n   */\r\n  selectServer: function(result) {\r\n    if (this._state != 1) {\r\n      if (this._state == 0) throw \"No test points added\";\r\n      if (this._state == 2) throw \"Server already selected\";\r\n      if (this._state >= 3)\r\n        throw \"You can't select a server while the test is running\";\r\n    }\r\n    if (this._selectServerCalled) throw \"selectServer already called\"; else this._selectServerCalled=true;\r\n    /*this function goes through a list of servers. For each server, the ping is measured, then the server with the function result is called with the best server, or null if all the servers were down.\r\n     */\r\n    var select = function(serverList, result) {\r\n      //pings the specified URL, then calls the function result. Result will receive a parameter which is either the time it took to ping the URL, or -1 if something went wrong.\r\n      var PING_TIMEOUT = 2000;\r\n      var USE_PING_TIMEOUT = true; //will be disabled on unsupported browsers\r\n      if (/MSIE.(\\d+\\.\\d+)/i.test(navigator.userAgent)) {\r\n        //IE11 doesn't support XHR timeout\r\n        USE_PING_TIMEOUT = false;\r\n      }\r\n      var ping = function(url, result) {\r\n        url += (url.match(/\\?/) ? \"&\" : \"?\") + \"cors=true\";\r\n        var xhr = new XMLHttpRequest();\r\n        var t = new Date().getTime();\r\n        xhr.onload = function() {\r\n          if (xhr.responseText.length == 0) {\r\n            //we expect an empty response\r\n            var instspd = new Date().getTime() - t; //rough timing estimate\r\n            try {\r\n              //try to get more accurate timing using performance API\r\n              var p = performance.getEntriesByName(url);\r\n              p = p[p.length - 1];\r\n              var d = p.responseStart - p.requestStart;\r\n              if (d <= 0) d = p.duration;\r\n              if (d > 0 && d < instspd) instspd = d;\r\n            } catch (e) {\r\n              console.error(e)\r\n            }\r\n            result(instspd);\r\n          } else result(-1);\r\n        }.bind(this);\r\n        xhr.onerror = function() {\r\n          result(-1);\r\n        }.bind(this);\r\n        xhr.open(\"GET\", url);\r\n        if (USE_PING_TIMEOUT) {\r\n          try {\r\n            xhr.timeout = PING_TIMEOUT;\r\n            xhr.ontimeout = xhr.onerror;\r\n          } catch (e) {\r\n            console.error(e)\r\n          }\r\n        }\r\n        xhr.send();\r\n      }.bind(this);\r\n\r\n      //this function repeatedly pings a server to get a good estimate of the ping. When it's done, it calls the done function without parameters. At the end of the execution, the server will have a new parameter called pingT, which is either the best ping we got from the server or -1 if something went wrong.\r\n      var PINGS = 3, //up to 3 pings are performed, unless the server is down...\r\n        SLOW_THRESHOLD = 500; //...or one of the pings is above this threshold\r\n      var checkServer = function(server, done) {\r\n        var i = 0;\r\n        server.pingT = -1;\r\n        if (server.server.indexOf(location.protocol) == -1) done();\r\n        else {\r\n          var nextPing = function() {\r\n            if (i++ == PINGS) {\r\n              done();\r\n              return;\r\n            }\r\n            ping(\r\n              server.server + server.pingURL,\r\n              function(t) {\r\n                if (t >= 0) {\r\n                  if (t < server.pingT || server.pingT == -1) server.pingT = t;\r\n                  if (t < SLOW_THRESHOLD) nextPing();\r\n                  else done();\r\n                } else done();\r\n              }.bind(this)\r\n            );\r\n          }.bind(this);\r\n          nextPing();\r\n        }\r\n      }.bind(this);\r\n      //check servers in list, one by one\r\n      var i = 0;\r\n      var done = function() {\r\n        var bestServer = null;\r\n        for (var i = 0; i < serverList.length; i++) {\r\n          if (\r\n            serverList[i].pingT != -1 &&\r\n            (bestServer == null || serverList[i].pingT < bestServer.pingT)\r\n          )\r\n            bestServer = serverList[i];\r\n        }\r\n        result(bestServer);\r\n      }.bind(this);\r\n      var nextServer = function() {\r\n        if (i == serverList.length) {\r\n          done();\r\n          return;\r\n        }\r\n        checkServer(serverList[i++], nextServer);\r\n      }.bind(this);\r\n      nextServer();\r\n    }.bind(this);\r\n\r\n    //parallel server selection\r\n    var CONCURRENCY = 6;\r\n    var serverLists = [];\r\n    for (let i = 0; i < CONCURRENCY; i++) {\r\n      serverLists[i] = [];\r\n    }\r\n    for (let i = 0; i < this._serverList.length; i++) {\r\n      serverLists[i % CONCURRENCY].push(this._serverList[i]);\r\n    }\r\n    var completed = 0;\r\n    var bestServer = null;\r\n    for (let i = 0; i < CONCURRENCY; i++) {\r\n      select(\r\n        serverLists[i],\r\n        function(server) {\r\n          if (server != null) {\r\n            if (bestServer == null || server.pingT < bestServer.pingT)\r\n              bestServer = server;\r\n          }\r\n          completed++;\r\n          if (completed == CONCURRENCY) {\r\n            this._selectedServer = bestServer;\r\n            this._state = 2;\r\n            if (result) result(bestServer);\r\n          }\r\n        }.bind(this)\r\n      );\r\n    }\r\n  },\r\n  /**\r\n   * Starts the test.\r\n   * During the test, the onupdate(data) callback function will be called periodically with data from the worker.\r\n   * At the end of the test, the onend(aborted) function will be called with a boolean telling you if the test was aborted or if it ended normally.\r\n   */\r\n  start: function() {\r\n    if (this._state == 3) throw \"Test already running\";\r\n    this.worker = new SpeedtestWorker();\r\n    this.worker.onmessage = function(e) {\r\n      if (e.data === this._prevData) return;\r\n      else this._prevData = e.data;\r\n      var data = JSON.parse(e.data);\r\n      try {\r\n        if (this.onupdate) this.onupdate(data);\r\n      } catch (e) {\r\n        console.error(\"Speedtest onupdate event threw exception: \" + e);\r\n      }\r\n      if (data.testState >= 4) {\r\n        try {\r\n          if (this.onend) this.onend(data.testState == 5);\r\n        } catch (e) {\r\n          console.error(\"Speedtest onend event threw exception: \" + e);\r\n        }\r\n        clearInterval(this.updater);\r\n        this._state = 4;\r\n      }\r\n    }.bind(this);\r\n    this.updater = setInterval(\r\n      function() {\r\n        this.worker.postMessage(\"status\");\r\n      }.bind(this),\r\n      200\r\n    );\r\n    if (this._state == 1)\r\n        throw \"When using multiple points of test, you must call selectServer before starting the test\";\r\n    if (this._state == 2) {\r\n      this._settings.url_dl =\r\n        this._selectedServer.server + ':' + this._selectedServer.port + this._selectedServer.dlURL;\r\n      this._settings.url_ul =\r\n        this._selectedServer.server + ':' + this._selectedServer.port + this._selectedServer.ulURL;\r\n      this._settings.url_ping =\r\n        this._selectedServer.server + ':' + this._selectedServer.port + this._selectedServer.pingURL;\r\n      this._settings.url_getIp =\r\n        this._selectedServer.server + ':' + this._selectedServer.port + this._selectedServer.getIpURL;\r\n      this._settings.server_id = this._selectedServer.id;\r\n      if (typeof this._originalExtra !== \"undefined\") {\r\n        this._settings.telemetry_extra = JSON.stringify({\r\n          server: this._selectedServer.name,\r\n          extra: this._originalExtra\r\n        });\r\n      } else\r\n        this._settings.telemetry_extra = JSON.stringify({\r\n          server: this._selectedServer.name\r\n        });\r\n    }\r\n    this._state = 3;\r\n    this.worker.postMessage(\"start \" + JSON.stringify(this._settings));\r\n  },\r\n  /**\r\n   * Aborts the test while it's running.\r\n   */\r\n  abort: function() {\r\n    if (this._state < 3) throw \"You cannot abort a test that's not started yet\";\r\n    if (this._state < 4) this.worker.postMessage(\"abort\");\r\n  }\r\n};\r\n\r\nexport default Speedtest;","export const ApiHost = \"http://127.0.0.1:8080\";","<template>\n  <div id=\"testWrapper\">\n    <el-button\n      :type=\"startButtonType\"\n      @click=\"startStop\"\n      :disabled=\"startButtonForbidden\"\n    >{{!startButtonStart ? '开始' : '结束'}}</el-button>\n    <br />\n    <div id=\"serverSelectArea\">\n      <div>\n        <label for=\"serverList\">Server:</label>\n        <el-select placeholder=\"请选择\" v-model=\"changeServerId\">\n          <el-option\n            v-for=\"item in serverLists\"\n            :key=\"item.id\"\n            :value=\"item.id\"\n            :label=\"item.name\"\n            @change=\"changeServer\"\n          >\n          </el-option>\n        </el-select>\n      </div>\n    </div>\n    <div id=\"test\">\n      <div class=\"testGroup\">\n        <div class=\"testArea2\">\n          <div class=\"testName\">Ping</div>\n          <div id=\"pingText\" class=\"meterText\" style=\"color: #aa6060\">\n            {{ pingText }}\n          </div>\n          <div class=\"unit\">ms</div>\n        </div>\n        <div class=\"testArea2\">\n          <div class=\"testName\">Jitter</div>\n          <div id=\"jitText\" class=\"meterText\" style=\"color: #aa6060\">\n            {{ jitterText }}\n          </div>\n          <div class=\"unit\">ms</div>\n        </div>\n      </div>\n      <div class=\"testGroup\">\n        <div class=\"testArea\">\n          <div class=\"testName\">Download</div>\n          <canvas id=\"dlMeter\" class=\"meter\"></canvas>\n          <div id=\"dlText\" class=\"meterText\">{{ dlText }}</div>\n          <div class=\"unit\">Mbps</div>\n        </div>\n        <div class=\"testArea\">\n          <div class=\"testName\">Upload</div>\n          <canvas id=\"ulMeter\" class=\"meter\"></canvas>\n          <div id=\"ulText\" class=\"meterText\">{{ ulText }}</div>\n          <div class=\"unit\">Mbps</div>\n        </div>\n      </div>\n      <div id=\"ipArea\">\n        <div id=\"ipAndIsp\">{{ ipAndIspContent }}</div>\n        <div id=\"ipPositionAndAccessMethod\">\n          {{ ipPositionAndAccessMethodContent }}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport Speedtest from \"./speedtest\";\nimport { ApiHost } from \"../../../../utils/api\";\nexport default {\n  name: \"Speedtest\",\n  data: function () {\n    return {\n      s: new Speedtest(),\n      pointReady: false,\n      uiData: null,\n      startButtonType: \"primary\",\n      startButtonForbidden: true,\n      startButtonStart: false,\n      ipAndIspContent: \"\",\n      ipPositionAndAccessMethodContent: \"\",\n      dlText: 0,\n      ulText: 0,\n      pingText: 0,\n      jitterText: 0,\n      serverLists: [],\n      changeServerId: 1\n    };\n  },\n  methods: {\n    startStop: function () {\n      if (!this.pointReady) return;\n      if (this.s.getState() == 3) {\n        //speedtest is running, abort\n        this.s.abort();\n        // data = null;\n        this.startButtonType = \"primary\";\n        this.startButtonStart = false;\n        this.initUI();\n      } else {\n        //test is not running, begin\n        this.startButtonType = \"danger\";\n        this.startButtonStart = true;\n        this.s.onupdate = (data) => {\n          this.uiData = data;\n        };\n        this.s.onend = () => {\n          this.startButtonType = \"primary\";\n          this.startButtonStart = false;\n          this.updateUI(true);\n        };\n        this.s.start();\n      }\n    },\n    initUI: function () {\n      var meterBk = /Trident.*rv:(\\d+\\.\\d+)/i.test(navigator.userAgent)\n        ? \"#EAEAEA\"\n        : \"#80808040\";\n      var dlColor = \"#6060AA\",\n        ulColor = \"#616161\";\n      this.drawMeter(this.I(\"dlMeter\"), 0, meterBk, dlColor, 0);\n      this.drawMeter(this.I(\"ulMeter\"), 0, meterBk, ulColor, 0);\n    },\n    updateUI: function (forced) {\n      var meterBk = /Trident.*rv:(\\d+\\.\\d+)/i.test(navigator.userAgent)\n        ? \"#EAEAEA\"\n        : \"#80808040\";\n      var dlColor = \"#6060AA\",\n        ulColor = \"#616161\";\n      var progColor = meterBk;\n\n      if (!forced && this.s.getState() != 3) return;\n      if (this.uiData == null) return;\n      var status = this.uiData.testState;\n      // 因为再调用abort之后不知道为啥该函数会再执行一次\n      // 此时所有uiData已经为空，因此不需要显示链接符号\n      let linkChar = \"\";\n      if (this.uiData.clientIp.length && this.uiData.isp.length) linkChar = \"-\";\n      this.ipAndIspContent = this.uiData.clientIp + linkChar + this.uiData.isp;\n      if (this.uiData.ipPosition.length && this.uiData.ipAccessMethod.length) {\n        linkChar = \"-\";\n      } else {\n        linkChar = \"\";\n      }\n      this.ipPositionAndAccessMethodContent =\n        this.uiData.ipPosition + linkChar + this.uiData.ipAccessMethod;\n      this.dlText =\n        status == 1 && this.uiData.dlStatus == 0\n          ? \"...\"\n          : this.format(this.uiData.dlStatus);\n      this.drawMeter(\n        this.I(\"dlMeter\"),\n        this.mbpsToAmount(\n          Number(this.uiData.dlStatus * (status == 1 ? this.oscillate() : 1))\n        ),\n        meterBk,\n        dlColor,\n        Number(this.uiData.dlProgress),\n        progColor\n      );\n      this.ulText =\n        status == 3 && this.uiData.ulStatus == 0\n          ? \"...\"\n          : this.format(this.uiData.ulStatus);\n      this.drawMeter(\n        this.I(\"ulMeter\"),\n        this.mbpsToAmount(\n          Number(this.uiData.ulStatus * (status == 3 ? this.oscillate() : 1))\n        ),\n        meterBk,\n        ulColor,\n        Number(this.uiData.ulProgress),\n        progColor\n      );\n      this.pingText = this.format(this.uiData.pingStatus);\n      this.jitterText = this.format(this.uiData.jitterStatus);\n    },\n    I: (i) => {\n      return document.getElementById(i);\n    },\n    mbpsToAmount: (s) => {\n      return 1 - 1 / Math.pow(1.3, Math.sqrt(s));\n    },\n    format: (d) => {\n      d = Number(d);\n      if (d < 10) return d.toFixed(2);\n      if (d < 100) return d.toFixed(1);\n      return d.toFixed(0);\n    },\n    oscillate: () => {\n      return 1 + 0.02 * Math.sin(Date.now() / 100);\n    },\n    drawMeter: (c, amount, bk, fg, progress, prog) => {\n      var ctx = c.getContext(\"2d\");\n      var dp = window.devicePixelRatio || 1;\n      var cw = c.clientWidth * dp,\n        ch = c.clientHeight * dp;\n      var sizScale = ch * 0.0055;\n      if (c.width == cw && c.height == ch) {\n        ctx.clearRect(0, 0, cw, ch);\n      } else {\n        c.width = cw;\n        c.height = ch;\n      }\n      ctx.beginPath();\n      ctx.strokeStyle = bk;\n      ctx.lineWidth = 12 * sizScale;\n      ctx.arc(\n        c.width / 2,\n        c.height - 58 * sizScale,\n        c.height / 1.8 - ctx.lineWidth,\n        -Math.PI * 1.1,\n        Math.PI * 0.1\n      );\n      ctx.stroke();\n      ctx.beginPath();\n      ctx.strokeStyle = fg;\n      ctx.lineWidth = 12 * sizScale;\n      ctx.arc(\n        c.width / 2,\n        c.height - 58 * sizScale,\n        c.height / 1.8 - ctx.lineWidth,\n        -Math.PI * 1.1,\n        amount * Math.PI * 1.2 - Math.PI * 1.1\n      );\n      ctx.stroke();\n      if (typeof progress !== \"undefined\") {\n        ctx.fillStyle = prog;\n        ctx.fillRect(\n          c.width * 0.3,\n          c.height - 16 * sizScale,\n          c.width * 0.4 * progress,\n          4 * sizScale\n        );\n      }\n    },\n    frame: function () {\n      requestAnimationFrame(this.frame);\n      this.updateUI();\n    },\n    changeServer: function (id) {\n      id --;\n      this.s.setSelectedServer(this.s._serverList[id]);\n    },\n  },\n  mounted: function () {\n    this.frame();\n    this.s.loadServerList(ApiHost + \"/api/testpoint?cors=1\", (servers) => {\n      if (servers == null) {\n        this.changeServerId = \"测速节点加载失败\";\n        alert(\"测速节点列表加载失败\");\n        return;\n      }\n      // default no auto server select\n      this.changeServerId = servers[0].id;\n      this.startButtonForbidden = false;\n      this.s.setSelectedServer(servers[0]);\n      // update ui\n      this.serverLists = servers;\n      this.pointReady = true;\n      this.startButtonType = \"primary\";\n    });\n  },\n};\n</script>\n<style scoped>\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Speedtest.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Speedtest.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Speedtest.vue?vue&type=template&id=f8b0cfec&scoped=true&\"\nimport script from \"./Speedtest.vue?vue&type=script&lang=js&\"\nexport * from \"./Speedtest.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f8b0cfec\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    <el-container>\n      <el-header>Header</el-header>\n      <el-main>\n        <Speedtest></Speedtest>\n      </el-main>\n      <el-footer>Footer</el-footer>\n    </el-container>\n  </div>\n</template>\n\n<script>\nimport Speedtest from './components/Speedtest/Speedtest.vue'\nexport default {\n  name: \"App\",\n  components: {\n    Speedtest\n  },\n};\n</script>\n\n<style>\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=2248ceb4&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\nimport ElementUI from 'element-ui'\nimport 'element-ui/lib/theme-chalk/index.css';\n\nVue.config.productionTip = false;\n\nVue.use(ElementUI);\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')\n"],"sourceRoot":""}